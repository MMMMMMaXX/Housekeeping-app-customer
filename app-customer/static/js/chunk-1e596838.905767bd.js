(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e596838"],{"159b":function(e,t,r){var a=r("da84"),s=r("fdbc"),n=r("17c2"),c=r("9112");for(var i in s){var o=a[i],d=o&&o.prototype;if(d&&d.forEach!==n)try{c(d,"forEach",n)}catch(l){d.forEach=n}}},"17c2":function(e,t,r){"use strict";var a=r("b727").forEach,s=r("a640"),n=s("forEach");e.exports=n?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"362f":function(e,t,r){},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("b64b"),r("a4d3"),r("4de4"),r("e439"),r("159b"),r("dbb4");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"8ace":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"header"},[r("van-sticky",[r("van-nav-bar",{attrs:{title:"确认订单","left-text":"返回","left-arrow":""},on:{"click-left":e.onClickLeft}})],1)],1),r("div",{staticClass:"contect"},[r("van-cell",{staticClass:"cell_contect",attrs:{icon:"map-marked",value:""},on:{click:e.getAddressList}},[r("span",{staticClass:"cell_title"},[e._v("服务地址")]),r("br"),r("span",{staticClass:"cell_label"},[e._v("姓名："+e._s(e.address.name))]),r("br"),r("span",{staticClass:"cell_label"},[e._v("电话："+e._s(e.address.tel))]),r("br"),r("span",{staticClass:"cell_label"},[e._v("地址："+e._s(e.address.address))])]),r("van-cell",{staticClass:"cell_contect",attrs:{icon:"column"}},[r("span",{staticClass:"cell_title"},[e._v("订单详情")]),r("br"),e._l(e.orderLines,(function(t,a){return r("div",{key:a,staticClass:"cell_label"},[0!=t[1].number?r("van-row",{attrs:{gutter:"20",type:"flex"}},[r("van-col",{attrs:{span:"8"}},[e._v(e._s(t[1].productName))]),r("van-col",{attrs:{span:"8"}},[e._v("x"+e._s(t[1].number))]),r("van-col",{attrs:{span:"8"}},[e._v("￥"+e._s(t[1].price))])],1):e._e()],1)})),r("van-row",{staticClass:"cell_label"},[r("van-col",{attrs:{offset:"14",span:"12"}},[e._v("总价：￥"+e._s(e.total))])],1),r("br")],2),r("van-cell",{staticClass:"cell_contect",attrs:{icon:"underway"},on:{click:e.getTime}},[r("span",{staticClass:"cell_title"},[e._v("服务时间")]),r("span",{staticClass:"cell_label",staticStyle:{float:"right"}},[e._v(" "+e._s(e._f("dateFormat")(e.currentDate))+" ")])]),r("van-action-sheet",{attrs:{title:"选择地址"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("van-address-list",{attrs:{list:e.addressData,"add-button-text":"确定"},on:{add:e.confirmClick},model:{value:e.chosenAddressId,callback:function(t){e.chosenAddressId=t},expression:"chosenAddressId"}})],1),r("van-action-sheet",{model:{value:e.showTime,callback:function(t){e.showTime=t},expression:"showTime"}},[r("van-datetime-picker",{attrs:{type:"datetime",title:"选择服务时间","min-date":e.minDate,"max-date":e.maxDate,"columns-order":["year","month","day","hour","minute"],formatter:e.formatter},on:{confirm:e.selectTime,cancel:e.clickCancel},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1),r("div",{staticClass:"submitBtn"},[r("van-button",{attrs:{round:"",type:"primary",block:"",color:"linear-gradient(to right,#ec6f66, #f3a183)"},on:{click:e.submitOrder}},[e._v("提交订单")])],1)])},s=[],n=r("b85c"),c=r("1da1"),i=r("5530"),o=(r("96cf"),r("4de4"),r("159b"),r("dac6")),d=r("2f62"),l={data:function(){return{show:!1,showTime:!1,chosenAddressId:"1",addressData:[],address:[],orderData:[],minDate:new Date,maxDate:new Date(2025,10,1),currentDate:new Date}},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(d["b"])("user",["getUserInfo"])),Object(d["d"])("shopcart",["clearShopcart"])),{},{onClickLeft:function(){this.clearShopcart(),this.$router.go(-1)},getAddressList:function(){this.show=!0},confirmClick:function(){var e=this;this.address=this.addressData.filter((function(t){return t.id===e.chosenAddressId})),this.address=this.address[0],this.show=!1},getTime:function(){this.showTime=!0},submitOrder:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a,s,c,i,d,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=Object(n["a"])(e.productData),t.prev=1,r.s();case 3:if((a=r.n()).done){t.next=15;break}if(s=a.value,void 0!=e.orderLines.get(s.id)){t.next=9;break}return t.abrupt("continue",13);case 9:c=e.orderLines.get(s.id).productId,i=e.orderLines.get(s.id).price,d=e.orderLines.get(s.id).number,e.orderData.push({id:0,number:d,orderId:0,price:i,productId:c});case 13:t.next=3;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),r.e(t.t0);case 20:return t.prev=20,r.f(),t.finish(20);case 23:return l={addressId:e.address.id,customerId:e.userInfo.id,orderLines:e.orderData,serviceTime:e.currentDate.getTime()},t.next=26,Object(o["c"])("/order/submitOrder",l);case 26:u=t.sent,200===u.data.status?(e.$notify({message:"提交订单成功",type:"success"}),e.clearShopcart(),setTimeout((function(){e.$router.go(-1)}),600)):e.$notify({message:u.data.message,type:"danger"});case 28:case"end":return t.stop()}}),t,null,[[1,17,20,23]])})))()},getAddressData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={page:1,pageSize:111},t.next=3,Object(o["a"])("/address/pageQuery",r);case 3:a=t.sent,e.addressData=a.data.data.list,e.addressData=e.addressList(),e.address=e.addressData[0],e.chosenAddressId=e.address.id;case 8:case"end":return t.stop()}}),t)})))()},selectTime:function(e){this.currentDate=e,this.showTime=!1},clickCancel:function(){this.showTime=!1},formatter:function(e,t){return"year"===e?t+"年":"month"===e?t+"月":"day"===e?t+"日":"hour"===e?t+"时":"minute"===e?t+"分":t},addressList:function(){var e=this.addressData,t=[];if(e)return e.forEach((function(e,r){var a={};a.id=e.id,a.name=e.username,a.tel=e.telephone,a.address=e.province+e.city+e.area+e.address,t.push(a)})),t}}),created:function(){this.getAddressData(),this.getUserInfo()},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(d["e"])("shopcart",["orderLines"])),Object(d["c"])("shopcart",["total"])),Object(d["e"])("user",["userInfo"])),Object(d["e"])("product",["productData"]))},u=l,f=(r("f3e9"),r("2877")),b=Object(f["a"])(u,a,s,!1,null,"9be4bafa",null);t["default"]=b.exports},a640:function(e,t,r){"use strict";var a=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))}},b64b:function(e,t,r){var a=r("23e7"),s=r("7b0b"),n=r("df75"),c=r("d039"),i=c((function(){n(1)}));a({target:"Object",stat:!0,forced:i},{keys:function(e){return n(s(e))}})},dbb4:function(e,t,r){var a=r("23e7"),s=r("83ab"),n=r("56ef"),c=r("fc6a"),i=r("06cf"),o=r("8418");a({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(e){var t,r,a=c(e),s=i.f,d=n(a),l={},u=0;while(d.length>u)r=s(a,t=d[u++]),void 0!==r&&o(l,t,r);return l}})},e439:function(e,t,r){var a=r("23e7"),s=r("d039"),n=r("fc6a"),c=r("06cf").f,i=r("83ab"),o=s((function(){c(1)})),d=!i||o;a({target:"Object",stat:!0,forced:d,sham:!i},{getOwnPropertyDescriptor:function(e,t){return c(n(e),t)}})},f3e9:function(e,t,r){"use strict";r("362f")}}]);
//# sourceMappingURL=chunk-1e596838.905767bd.js.map